# 무결성 제약조건

## 키

- 키는 릴레이션에서 **특정 투플을 식별할 때 사용하는 속성 혹은 그의 집합**이다.

![키의 예시를 보여주는 표](/SQL_picture/KEY.png)

- 키는 **릴레이션끼리의 관계를 맺는 곳**에서도 사용된다.

![키의 관계를 보여주는 표](/SQL_picture/KEY_RELATION.png)

## 키의 종류

- 슈퍼키
> 튜플들을 유일하게 식별할 수 있는 속성(의 집합)

- 후보키
> 슈퍼키 중 제일 적은 수의 집합(들)


- 기본키
> 후보키 중에서 선정된 하나의 키


- 대체키
> 후보키 중에서 기본키가 되지 않은 키


- 대리키
> 보안이슈/많은 속성/기본키의 부족으로 임의의 번호를 부여한 키


- 외래키
> 다른 릴레이션의 기본키를 참조한 키


## 키의 관계

![외래키의 관계를 보여주는 표](/SQL_picture/FOREGIN_KEY.png)

외래키가 성립하기 위해서는,

- 참조되고, 참조되는 **두 릴레이션의 도메인이 같아야 한다.**
- 참조되는 릴레이션의 기본키 값이 변경되면, **참조된 외래키도 바뀌어야 한다.**

## 무결성 제약조건

### 무결성 제약조건의 종류

- 도메인 무결성 제약조건<sub>(도메인 제약)</sub>
> 릴레이션 내의 투플들은 각 속성의 도메인에 지닌 값만을 사용해야 한다.

> > _'Orders' 릴레이션에서 'orderdate'는 날짜 데이터를 지니고 있다._ 

> > _그래서 튜플들은 'orderdate'속성을 무조건 날짜 데이터로 기입해야한다._

- 개체 무결성 제약조건<sub>(기본키 제약)</sub>
> 릴레이션은 기본키가 지정되어야 하며, 기본키에는 NULL값이나 2개 이상의 중복되는 값이 있어서는 안된다.

> > _'Customers' 릴레이션에서는 'custid', 'Book' 릴레이션에서는 'bookid', 'Orders' 릴레이션에서는 'orderid'를 기본키로 사용한다._ 

> > _이 3개의 속성들은 전부 튜플 당 고유한 값을 가지며, NULL이 없으므로, 개체 무결성 제약조건을 위반하지 않는다._

- 참조 무결성 제약조건<sub>(외래키 제약)</sub>
> 참조되는 릴레이션을 부모 릴레이션, 참조받는 릴레이션을 자식 릴레이션이라 정하고,
> 자식의 외래키와 부모의 기본키의 도메인은 서로 같아야 한다.

> > _'Orders' 릴레이션에서의 'bookid'는 'Book'의 'bookid'를 참조받는 외래키이다._ 

> > _그래서 'bookid'는 'Orders' 혹은 'Book'에서만 수정/삽입/삭제가 불가능하다._




